


<div data-ng-controller="TopologyCtrl" 
	ng-init="init(horizon.network_topology)" class="page">

	<div class="row">

		<!-- List -->
		<div class="col-md-12 col-lg-12">
		
			<div class="panel panel-default">
				<div class="panel-heading">
					<div class="row">
						<div class="col-md-6 text-left">
							<span class="glyphicon glyphicon-th"></span>
							Topology
						</div><!-- // col -->
						
						<div class="col-md-6 text-right">
							<div class="btn-group" dropdown>
								<button type="button" class="btn btn-info btn-sm dropdown-toggle">
									동작
									<span class="caret"></span>
								</button>
				
				                <ul class="dropdown-menu" role="menu">
				                	<li><a href ng-click="createInstanceForm()">인스턴스 시작</a></li>
				                	<li><a href ng-click="createNetworkForm()">네트워크 생성</a></li>
				                	<li><a href ng-click="createRouterForm()">라우터 생성</a></li>
				                </ul>
							</div>
							
							<div class="btn-group toggleView">
		                        <button type="button" class="btn btn-default btn-sm small" data-value="small"><span class="glyphicon glyphicon-th"></span>&nbsp;작음</button>
		                        <button type="button" class="btn btn-default btn-sm normal" data-value="normal"><span class="glyphicon glyphicon-th-large"></span>&nbsp;기본</button>
		                    </div>
						</div>

					</div><!-- // row -->
				</div><!-- // panel-heading -->

				<div class="panel-body ">
					<div class="custom-pre-scrollable" ng-style="style()" resizefit>





<script type="text/html" id="balloon_container">

<div class="topologyBalloon" id="{{balloon_id}}">
  <a  class="closeTopologyBalloon">&times;</a>
  <div class="contentBody">
    {{> table1}}
    {{> table2}}
  </div>
  <div class="footer">
    <div class="footerInner">
      <div class="cell link">
      </div>
      <div class="cell delete">
        <button class="delete-device btn btn-danger btn-xs {{type}}" data-type="{{type}}"  data-device-id="{{id}}">{{type_capital}}</button>
      </div>
    </div>
  </div>
</div>

	</script>

<script type="text/html" id="balloon_device">

<table class="detailInfoTable">
  <caption>{{name}}</caption>
  <tbody>
    <tr>
      <th class="device">{{id_label}}</th>
      <td>{{id}}</td>
    </tr>
    <tr>
      <th class="device">{{status_label}}</th>
      <td>
        <span class="{{status_class}}">{{status}}</span>
      </td>
    </tr>
  </tbody>
</table>

</script>

<script type="text/html" id="balloon_port">

<table class="detailInfoTable">
  <caption>{{interfaces_label}}</caption>
  <tbody>
    {{#port}}
    <tr>
      <th>
        <span title="{{id}}">
          <!--<a href="{{url}}">{{id}}</a>-->
			<b>{{id}}</b>
        </span>
      </th>
      <td>{{ip_address}}</td>
      <td>{{device_owner}}</td>
      <td>
        <span class="{{port_status_class}}">{{port_status}}</span>
      </td>
      <td class="delete">
        {{#is_interface}}
        <button class="delete-port btn btn-danger btn-xs" data-router-id="{{router_id}}"  data-port-id="{{id}}">{{interface_label}}</button>
        {{/is_interface}}
      </td>
    </tr>
    {{/port}}
  </tbody>
</table>

</script>

						<!-- 
						<div class="topologyNavi">
						  <div class="toggleView btn-group" data-toggle="buttons-radio">
						    <button type="button" class="btn small active" data-value="small"><i class="icon-th"></i>작음</button>
						    <button type="button" class="btn normal" data-value="normal"><i class="icon-th-large"></i>기본</button>
						  </div>
						  
						</div> -->

						<div id="topologyCanvasContainer">
						  <!-- <div class="nodata">표시할 네트워크, 라우터, 연결한 인스턴스가 없습니다.</div> -->
						  
						
							<svg width="400" height="400" id="topology_canvas">
							  <defs>
							    <pattern id="device_normal_bg" patternUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
							      <g>
							        <rect width="20" height="20" class="base_bg_normal"></rect>
							      </g>
							    </pattern>
							    <pattern id="device_normal_bg_loading" patternUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
							      <g>
							        <rect width="20" height="20" class="loading_bg_normal"></rect>
							        <path d='M0 20L20 0ZM22 18L18 22ZM-2 2L2 -2Z' stroke-linecap="square" stroke='rgba(0, 0, 0, 0.3)' stroke-width="7"></path>
							      </g>
							      <animate attributeName="x" attributeType="XML" begin="0s" dur="0.5s" from="0" to="-20" repeatCount="indefinite"></animate>
							    </pattern>
							    <pattern id="device_small_bg" patternUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
							      <g>
							        <rect width="20" height="20" class="base_bg_small"></rect>
							      </g>
							    </pattern>
							    <pattern id="device_small_bg_loading" patternUnits="userSpaceOnUse" x="0" y="0" width="5" height="5">
							      <g>
							        <rect width="5" height="5" class="loading_bg_small"></rect>
							        <path d='M0 5L5 0ZM6 4L4 6ZM-1 1L1 -1Z' stroke-linecap="square" stroke='rgba(0, 0, 0, 0.4)' stroke-width="1.5"></path>
							      </g>
							      <animate attributeName="x" attributeType="XML" begin="0s" dur="0.5s" from="0" to="-5" repeatCount="indefinite"></animate>
							    </pattern>
							  </defs>
							</svg>
							<svg id="topology_template" display="none">
							  <g class="router_small device_body">
							    <g class="ports" pointer-events="none"></g>
							    <rect rx="3" ry="3" width="20" height="20" class="frame"></rect>
							    <g transform="translate(3.5,3)" class="icon">
							      <polygon points="12.51,4.23 12.51,0.49 8.77,0.49 9.68,1.4 6.92,4.16 8.84,6.08 11.6,3.32  "></polygon>
							      <polygon points="0.49,8.77 0.49,12.51 4.23,12.51 3.32,11.6 6.08,8.83 4.17,6.92 1.4,9.68  "></polygon>
							      <polygon points="1.85,5.59 5.59,5.59 5.59,1.85 4.68,2.76 1.92,0 0,1.92 2.76,4.68   "></polygon>
							      <polygon points="11.15,7.41 7.41,7.41 7.41,11.15 8.32,10.24 11.08,13 13,11.08 10.24,8.32   "></polygon>
							    </g>
							  </g>
							  <g class="instance_small device_body">
							    <g class="ports" pointer-events="none"></g>
							    <rect rx="3" ry="3" width="20" height="20" class="frame"></rect>
							    <g transform="translate(5,3)" class="icon">
							      <rect class="instance_bg" width="10" height="13"></rect>
							      <rect x="2" y="1" fill="#FFFFFF" width="6" height="2"></rect>
							      <rect x="2" y="4" fill="#FFFFFF" width="6" height="2"></rect>
							      <circle class="active" cx="3" cy="10" r="1.3"></circle>
							    </g>
							  </g>
							  <g class="network_container_small">
							    <rect rx="7" ry="7" width="15" height="200" style="fill: #8541B5;" class="network-rect"></rect>
							    <text x="250" y="-3" class="network-name" transform="rotate(90 0 0)" pointer-events="none">Network</text>
							    <text x="0" y="-20" class="network-cidr" transform="rotate(90 0 0)">0.0.0.0</text>
							  </g>
							  <g class="router_normal device_body">
							    <g class="ports" pointer-events="none"></g>
							    <rect class="frame" x="0" y="0" rx="6" ry="6" width="90" height="50"></rect>
							    <g class="texts" pointer-events="none">
							      <rect class="texts_bg" x="1.5" y="32" width="87" height="17"></rect>
							      <text x="45" y="46" class="type">라우터</text>
							      <text x="45" y="22" class="name">router</text>
							    </g>
							    <g class="icon" transform="translate(6,6)" pointer-events="none">
							      <circle class="icon_bg" cx="0" cy="0" r="12"></circle>
							      <g transform="translate(-6.5,-6.5)">
							        <polygon points="12.51,4.23 12.51,0.49 8.77,0.49 9.68,1.4 6.92,4.16 8.84,6.08 11.6,3.32  "></polygon>
							        <polygon points="0.49,8.77 0.49,12.51 4.23,12.51 3.32,11.6 6.08,8.83 4.17,6.92 1.4,9.68  "></polygon>
							        <polygon points="1.85,5.59 5.59,5.59 5.59,1.85 4.68,2.76 1.92,0 0,1.92 2.76,4.68   "></polygon>
							        <polygon points="11.15,7.41 7.41,7.41 7.41,11.15 8.32,10.24 11.08,13 13,11.08 10.24,8.32  "></polygon>
							      </g>
							    </g>
							  </g>
							  <g class="instance_normal device_body">
							    <g class="ports" pointer-events="none"></g>
							    <rect class="frame" x="0" y="0" rx="6" ry="6" width="90" height="50"></rect>
							    <g class="texts">
							      <rect class="texts_bg" x="1.5" y="32" width="87" height="17"></rect>
							      <text x="45" y="46" class="type">인스턴스</text>
							      <text x="45" y="22" class="name">instance</text>
							    </g>
							    <g class="icon" transform="translate(6,6)">
							      <circle class="icon_bg" cx="0" cy="0" r="12"></circle>
							      <g transform="translate(-5,-6.5)">
							        <rect class="instance_bg" width="10" height="13"></rect>
							        <rect x="2" y="1" fill="#FFFFFF" width="6" height="2"></rect>
							        <rect x="2" y="4" fill="#FFFFFF" width="6" height="2"></rect>
							        <circle class="active" cx="3" cy="10" r="1.3"></circle>
							      </g>
							    </g>
							  </g>
							  <g class="network_container_normal">
							    <rect rx="9" ry="9" width="17" height="500" style="fill: #8541B5;" class="network-rect"></rect>
							    <text x="250" y="-4" class="network-name" transform="rotate(90 0 0)" pointer-events="none">Network</text>
							    <text x="490" y="-20" class="network-cidr" transform="rotate(90 0 0)">0.0.0.0</text>
							  </g>
							</svg>
							
							
							<svg id="topology_template" display="none">
							  <g class="router_small device_body">
							    <g class="ports" pointer-events="none"></g>
							    <rect rx="3" ry="3" width="20" height="20" class="frame"></rect>
							    <g transform="translate(3.5,3)" class="icon">
							      <polygon points="12.51,4.23 12.51,0.49 8.77,0.49 9.68,1.4 6.92,4.16 8.84,6.08 11.6,3.32  "></polygon>
							      <polygon points="0.49,8.77 0.49,12.51 4.23,12.51 3.32,11.6 6.08,8.83 4.17,6.92 1.4,9.68  "></polygon>
							      <polygon points="1.85,5.59 5.59,5.59 5.59,1.85 4.68,2.76 1.92,0 0,1.92 2.76,4.68   "></polygon>
							      <polygon points="11.15,7.41 7.41,7.41 7.41,11.15 8.32,10.24 11.08,13 13,11.08 10.24,8.32   "></polygon>
							    </g>
							  </g>
							  <g class="instance_small device_body">
							    <g class="ports" pointer-events="none"></g>
							    <rect rx="3" ry="3" width="20" height="20" class="frame"></rect>
							    <g transform="translate(5,3)" class="icon">
							      <rect class="instance_bg" width="10" height="13"></rect>
							      <rect x="2" y="1" fill="#FFFFFF" width="6" height="2"></rect>
							      <rect x="2" y="4" fill="#FFFFFF" width="6" height="2"></rect>
							      <circle class="active" cx="3" cy="10" r="1.3"></circle>
							    </g>
							  </g>
							  <g class="network_container_small">
							    <rect rx="7" ry="7" width="15" height="200" style="fill: #8541B5;" class="network-rect"></rect>
							    <text x="250" y="-3" class="network-name" transform="rotate(90 0 0)" pointer-events="none">Network</text>
							    <text x="0" y="-20" class="network-cidr" transform="rotate(90 0 0)">0.0.0.0</text>
							  </g>
							  <g class="router_normal device_body">
							    <g class="ports" pointer-events="none"></g>
							    <rect class="frame" x="0" y="0" rx="6" ry="6" width="90" height="50"></rect>
							    <g class="texts" pointer-events="none">
							      <rect class="texts_bg" x="1.5" y="32" width="87" height="17"></rect>
							      <text x="45" y="46" class="type">라우터</text>
							      <text x="45" y="22" class="name">router</text>
							    </g>
							    <g class="icon" transform="translate(6,6)" pointer-events="none">
							      <circle class="icon_bg" cx="0" cy="0" r="12"></circle>
							      <g transform="translate(-6.5,-6.5)">
							        <polygon points="12.51,4.23 12.51,0.49 8.77,0.49 9.68,1.4 6.92,4.16 8.84,6.08 11.6,3.32  "></polygon>
							        <polygon points="0.49,8.77 0.49,12.51 4.23,12.51 3.32,11.6 6.08,8.83 4.17,6.92 1.4,9.68  "></polygon>
							        <polygon points="1.85,5.59 5.59,5.59 5.59,1.85 4.68,2.76 1.92,0 0,1.92 2.76,4.68   "></polygon>
							        <polygon points="11.15,7.41 7.41,7.41 7.41,11.15 8.32,10.24 11.08,13 13,11.08 10.24,8.32  "></polygon>
							      </g>
							    </g>
							  </g>
							  <g class="instance_normal device_body">
							    <g class="ports" pointer-events="none"></g>
							    <rect class="frame" x="0" y="0" rx="6" ry="6" width="90" height="50"></rect>
							    <g class="texts">
							      <rect class="texts_bg" x="1.5" y="32" width="87" height="17"></rect>
							      <text x="45" y="46" class="type">인스턴스</text>
							      <text x="45" y="22" class="name">instance</text>
							    </g>
							    <g class="icon" transform="translate(6,6)">
							      <circle class="icon_bg" cx="0" cy="0" r="12"></circle>
							      <g transform="translate(-5,-6.5)">
							        <rect class="instance_bg" width="10" height="13"></rect>
							        <rect x="2" y="1" fill="#FFFFFF" width="6" height="2"></rect>
							        <rect x="2" y="4" fill="#FFFFFF" width="6" height="2"></rect>
							        <circle class="active" cx="3" cy="10" r="1.3"></circle>
							      </g>
							    </g>
							  </g>
							  <g class="network_container_normal">
							    <rect rx="9" ry="9" width="17" height="500" style="fill: #8541B5;" class="network-rect"></rect>
							    <text x="250" y="-4" class="network-name" transform="rotate(90 0 0)" pointer-events="none">Network</text>
							    <text x="490" y="-20" class="network-cidr" transform="rotate(90 0 0)">0.0.0.0</text>
							  </g>
							</svg>
						
						</div>
						
						<span data-networktopology="" id="networktopology" ng-attr-data-networktopology="{{networktopology}}" ></span>
						<div id="topologyMessages"></div>

						<script type="text/javascript">
/* 						  if (typeof horizon.network_topology !== 'undefined') {
						    horizon.network_topology.init();
						  } else {
						    addHorizonLoadEvent(function () {
						      horizon.network_topology.init();
						    });
						  } */
						</script>




					</div><!-- // resize fit -->
				</div><!-- // panel-body -->
			</div><!-- // panel -->
		</div><!-- // List -->


	</div><!-- // row -->

</div><!-- // VolumsCtrl -->




